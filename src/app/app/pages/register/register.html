<div class="register-container">
    <h2>Crear cuenta</h2>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
        <div class="form-group">
            <label for="username">Usuario</label>
            <input id="username" type="text" formControlName="username" placeholder="Tu nombre de usuario" />
            @if(registerForm.get('username')?.invalid && registerForm.get('username')?.touched) {
            <small class="error">El nombre debe tener entre 3 y 30 caracteres</small>
            }
        </div>

        <div class="form-group">
            <label for="email">Correo electrónico</label>
            <input id="email" type="email" formControlName="email" placeholder="ejemplo@correo.com" />
            @if(registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
            <small class="error">Ingrese un correo válido</small>
            }
        </div>

        <div class="form-group">
            <label for="password">Contraseña</label>
            <input id="password" type="password" formControlName="password" placeholder="********" />
            @if(registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <small class="error">Mínimo 6 caracteres</small>
            }
        </div>

        <div class="form-group">
            <label for="role">Rol</label>
            <select id="role" formControlName="role">
                @for(role of ['player','admin']; track role) {
                <option [value]="role">{{ role }}</option>
                }
            </select>
        </div>

        <button type="submit" [disabled]="loading || registerForm.invalid">
            @if(loading) { Registrando... } @else { Registrarse }
        </button>
    </form>

    @if(errorMessage) {
    <p class="error-message">{{ errorMessage }}</p>
    }

    @if(successMessage) {
    <p class="success-message">{{ successMessage }}</p>
    }
</div>